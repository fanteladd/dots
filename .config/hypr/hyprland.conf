$term=footclient
$lock=swaylockd -f -C ~/.config/swaylock/config
$menu=rofi -modi drun -show drun -drun-display-format \{name\} -theme dark
# $menu=wofi --show drun --no-actions | xargs hyprctl dispatch exec --
$browser=firefox

monitor=DP-1,preferred,0x0,1
monitor=eDP-1,preferred,3440x0,1

#exec-once=sleep 3; kanshi

input {
    kb_layout=it,us
    kb_variant=
    kb_model=
    kb_options=grp:rctrl_toggle
    kb_rules=
    repeat_rate=50
    repeat_delay=300
    natural_scroll=1
    follow_mouse=1
    touchpad {
        natural_scroll=1
        tap-to-click=1
    }

}

gestures {
    workspace_swipe=1
    workspace_swipe_fingers=3
}

general {
    sensitivity=0.50
    main_mod=SUPER

    gaps_in=3
    gaps_out=5
    border_size=2
    col.active_border=0x6272A4FF
    col.inactive_border=0x262626FF
    cursor_inactive_timeout=8

    apply_sens_to_raw=0 # do not apply the sensitivity to raw input (e.g. used by games where you aim)
    damage_tracking=full # leave it on full unless you hate your GPU and want to make it suffer

}

decoration {
    rounding=-1
    multisample_edges=1

    active_opacity=1.0
    inactive_opacity=1.0

    blur=1
    blur_size=4 # minimum 1
    blur_passes=1 # minimum 1, more passes = more resource intensive.
    blur_new_optimizations=1

    # Your blur "amount" is blur_size * blur_passes, but high blur_size (over around 5-ish) will produce artifacts.
    # if you want heavy blur, you need to up the blur_passes.
    # the more passes, the more you can up the blur_size without noticing artifacts.

    dim_inactive=1
    dim_strength=0.09
}


animations {
    enabled=1

    bezier=overshot,0.5,0.4,0.1,1.0
    animation=windows,1,4,overshot,slide
    animation=windowsMove,1,5,default
    animation=border,1,10,default
    animation=fade,1,10,default
    animation=workspaces,1,6,overshot,slidevert
}

dwindle {
    pseudotile=1 #enable pseudotiling on dwindle
    force_split=0
    split_width_multiplier=2.0
    use_active_for_splits=1
    col.group_border=0xff89dceb
    col.group_border_active=0xfff9e2af
}

misc {
    no_vfr=1
    mouse_move_enables_dpms=1 # wake on mouse move
}

binds {
    scroll_event_delay=1
    allow_workspace_cycles=1
  }

# example window rules

windowrule=float,title:Telegram.*
windowrule=float,floating
windowrule=fullscreen,title:^(Media viewer)$
windowrule=noblur,title:^(Media viewer)$
windowrule=animation popin 70%,telegramdesktop
windowrule=opacity 0.97,telegramdesktop
windowrule=noblur,firefox
windowrule=opacity 1.0,title:swayimg.*
windowrule=noblur,title:swayimg.*

windowrule=float,title:Apri cartella
windowrule=size 60% 80%,title:Apri cartella
windowrule=center,title:Apri cartella
windowrule=float,title:Apri file
windowrule=size 60% 80%,title:Apri file
windowrule=center,title:Apri file
windowrule=float,title:Open Folder
windowrule=size 60% 80%,title:Open Folder
windowrule=center,title:Open Folder
windowrule=float,title:Scegli file
windowrule=size 60% 80%,title:Scegli file
windowrule=center,title:Scegli file
windowrule=float,title:Open File
windowrule=size 60% 80%,title:Open File
windowrule=center,title:Open File
windowrule=float,telegram-desktop
windowrule=size 60% 80%,telegram-desktop
windowrule=center,telegram-desktop

# example binds
bind=SUPER,Return,exec,$term
bind=SUPERSHIFT,Return,exec,$term -T lf lf
bind=SUPER,X,exec,$lock
bind=SUPER,B,exec,$browser
bind=SUPERSHIFT,W,killactive,
bind=SUPERSHIFT,Q,exec,dmenu_powermenu
bind=SUPERCTRL,T,exec,telegram-desktop
bind=SUPERCTRL,M,exec,$term -T pulsemixer pulsemixer
bind=SUPERCTRL,N,exec,$term -T newsboat newsboat
bind=SUPERCTRL,A,exec,$term -T ncmpcpp ncmpcpp
bind=SUPERCTRL,P,exec,passmenu
bind=SUPERCTRL,W,exec,wifi -c
bind=SUPERSHIFT,M,exec,dmenumount
bind=SUPERSHIFT,U,exec,dmenuumount
bind=SUPER,S,togglefloating,
bind=SUPER,D,exec,$menu
bind=SUPER,F,fullscreen,0
bind=SUPER,M,fullscreen,1
bind=SUPER,T,pseudo,

# Mouse binds
bindm=SUPER,mouse:272,movewindow
bindm=SUPER,mouse:273,resizewindow

##### resize/move mode #####
bind=SUPER,r,submap,resize
submap=resize

bind=,h,resizeactive,-40 0
bind=,j,resizeactive,0 40
bind=,k,resizeactive,0 -40
bind=,l,resizeactive,40 0
bind=ALT,H,moveactive,-40 0
bind=ALT,J,moveactive,0 40
bind=ALT,K,moveactive,0 -40
bind=ALT,L,moveactive,40 0

bind=,escape,submap,reset
submap=reset

# groups
bind=SUPER,g,togglegroup
bind=SUPER,Tab,changegroupactive

# togglesplit
bind=SUPERCTRL,l,togglesplit

# dunstctl
bind=CTRL,SPACE,exec,dunstctl close
bind=CTRLSHIFT,SPACE,exec,dunstctl close-all
bind=CTRLSHIFT,H,exec,dunstctl history-pop
bind=CTRLSHIFT,I,exec,dunstctl action

bind=,F7,exec,dunstify -t 3000 "" "$(notify.sh)"

# grimblast
bind=,PRINT,exec,grimblast --notify save screen
bind=SHIFT,PRINT,exec,grimblast --notify copy screen
bind=CTRL,PRINT,exec,grimblast --notify save area
bind=CTRLSHIFT,PRINT,exec,grimblast --notify copy area

# move focus
bind=SUPER,H,movefocus,l
bind=SUPER,L,movefocus,r
bind=SUPER,K,movefocus,u
bind=SUPER,J,movefocus,d

# move active
bind=SUPERSHIFT,H,movewindow,l
bind=SUPERSHIFT,L,movewindow,r
bind=SUPERSHIFT,K,movewindow,u
bind=SUPERSHIFT,J,movewindow,d

# move to workspace
bind=SUPER,1,workspace,1
bind=SUPER,2,workspace,2
bind=SUPER,3,workspace,3
bind=SUPER,4,workspace,4
bind=SUPER,5,workspace,5
bind=SUPER,6,workspace,6
bind=SUPER,7,workspace,7
bind=SUPER,8,workspace,8
bind=SUPER,9,workspace,9
bind=SUPER,0,workspace,10
bind=SUPER,mouse_down,workspace,e-1
bind=SUPER,mouse_up,workspace,e+1

# move focused window to workspace
bind=SUPERSHIFT,1,movetoworkspace,1
bind=SUPERSHIFT,2,movetoworkspace,2
bind=SUPERSHIFT,3,movetoworkspace,3
bind=SUPERSHIFT,4,movetoworkspace,4
bind=SUPERSHIFT,5,movetoworkspace,5
bind=SUPERSHIFT,6,movetoworkspace,6
bind=SUPERSHIFT,7,movetoworkspace,7
bind=SUPERSHIFT,8,movetoworkspace,8
bind=SUPERSHIFT,9,movetoworkspace,9
bind=SUPERSHIFT,0,movetoworkspace,10

bind=SUPER,I,movetoworkspace,special
bind=SUPERSHIFT,I,togglespecialworkspace,

bind=SUPERSHIFT,G,exec,~/.config/hypr/scripts/crystalh --gaps
bind=SUPERSHIFT,V,exec,gpu-on-off.sh

# set wallpaper
exec-once=/home/davide/.local/bin/setbg /home/davide/pics/wallpapers
exec-once=swaybg -i /home/davide/.local/share/background -m fill

# Wob for volume/brightness
$WOBSOCK=/run/user/1000/wob.sock
exec-once=mkfifo $WOBSOCK && tail -f $WOBSOCK | wob

# volume
binde=,XF86AudioRaiseVolume,exec,pamixer -ui 2 && pamixer --get-volume > $WOBSOCK
binde=,XF86AudioLowerVolume,exec,pamixer -ud 2 && pamixer --get-volume > $WOBSOCK
bind=,XF86AudioMute,exec,pamixer --toggle-mute && ( pamixer --get-mute && echo 0 > $WOBSOCK ) || pamixer --get-volume > $WOBSOCK
bind=,XF86AudioMicMute,exec,pactl set-source-mute @DEFAULT_SOURCE@ toggle

# brightness
binde=,XF86MonBrightnessDown,exec,brightnessctl set 5%- | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $WOBSOCK
binde=,XF86MonBrightnessUp,exec,brightnessctl set +5% | sed -En 's/.*\(([0-9]+)%\).*/\1/p' > $WOBSOCK

# MPD
bind=,XF86AudioPlay,exec,mpc toggle
bind=,XF86AudioNext,exec,mpc next && ~/.config/ncmpcpp/notification
bind=,XF86AudioPrev,exec,mpc prev && ~/.config/ncmpcpp/notification
bind=,XF86AudioStop,exec,mpc stop

bind=SUPER,C,exec,clipman pick -t wofi

exec-once=swayidle -w timeout 200 '$lock' timeout 205 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on' before-sleep '$lock' 

$gtk=Adwaita-dark
$icon=Papirus-Dark
$font=sans-serif 12
$mono=monospace 12

exec-once=gsettings set org.gnome.desktop.interface gtk-theme            $gtk
exec-once=gsettings set org.gnome.desktop.interface icon-theme           $icon
exec-once=gsettings set org.gnome.desktop.interface font-theme           $font
exec-once=gsettings set org.gnome.desktop.interface monospace-font-theme $mono
exec-once=gsettings set org.gnome.desktop.interface color-scheme prefer-dark

exec-once=wl-paste -t text --watch clipman store
exec-once=wl-paste -p -t text --watch clipman store -P --histpath="~/.local/share/clipman-primary.json"

exec-once=xrandr --output XWAYLAND0 --primary
exec-once=foot --server
exec-once=rofi-polkit-agent -theme ~/.config/rofi/dark-pinentry.rasi
exec-once=systemctl restart --user dunst.service
exec-once=waybar --config ~/.config/waybar/config-hypr.jsonc
exec-once=systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
# vim: filetype=conf
