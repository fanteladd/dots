#!/bin/sh

case "$1" in
  *.7z|*.a|*.ace|*.alz|*.arc|*.arj|*.bz|*.bz2|*.cab|*.cpio|*.deb|*.gz|*.jar|\
  *.lha|*.lrz|*.lz|*.lzh|*.lzma|*.lzo|*.rar|*.rpm|*.rz|*.t7z|*.tar|*.tbz|\
  *.tbz2|*.tgz|*.tlz|*.txz|*.tZ|*.tzo|*.war|*.xz|*.Z|*.zip)
    als -- "$1"
    exit 0
    ;;
  *.[1-8])
    man -- "$1" | col -b
    exit 0
    ;;
  *.djvu|*.djv)
    djvutxt - <"$1"
    exit 0
    ;;
  *.svg)
    mediainfo "$1"
    exit 0
    ;;
  *.md)
    glow -s dark "$1"
    exit 0
    ;;
esac

case "$(file -Lb --mime-type -- "$1")" in
  image/*)
    chafa -c fill "$1" && exit 1
    exit 0
    ;;
  video/*)
    mediainfo "$1"
    exit 0
    ;;
  application/pdf)
    pdftotext -nopgbrk -q -- "$1" -
    exit 0
    ;;
  text/*)
    bat --color=always --style=plain --pager=never "$1"
    exit 0
    ;;
esac

file -Lb -- "$1" | fold -s -w "$width"
exit 1
